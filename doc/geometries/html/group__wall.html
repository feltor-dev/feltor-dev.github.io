<!-- HTML header for doxygen 1.9.3-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Extension: Geometries: Wall and Sheath</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?.../MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="menubar.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
    <!--My own title area-->
  <ul class="menubar">
      <!-- <li><a href="../../../index.html">/</a><li>-->
    <li><a href="../../dg/html/modules.html">dg</a></li>
    <li><a href="../../geometries/html/modules.html">dg::geo</a></li>
    <li><a href="../../file/html/modules.html">dg::file</a></li>
    <li><a href="../../exblas/html/namespacedg_1_1exblas.html">dg::exblas</a></li>
  </ul>
  <!--End My own title area-->
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Extension: Geometries
   </div>
   <div id="projectbrief">#include &quot;dg/geometries/geometries.h&quot;</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('group__wall.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">Wall and Sheath<div class="ingroups"><a class="el" href="group__geom__functors.html">3. New functors surrounding the magnetic field geometry</a> &raquo; <a class="el" href="group__geom.html">3.1 Creating a flux function</a></div></div></div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Collaboration diagram for Wall and Sheath:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="group__wall.svg" width="306" height="51"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gac47e668c6483d6cebfc9d6c798737b58"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="structdg_1_1geo_1_1_tokamak_magnetic_field.html">TokamakMagneticField</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__wall.html#gac47e668c6483d6cebfc9d6c798737b58">dg::geo::createModifiedField</a> (dg::file::WrappedJsonValue gs, dg::file::WrappedJsonValue jsmod, <a class="el" href="group__fluxfunctions.html#gacb84a8d3b8c253f1100c1530035da1de">CylindricalFunctor</a> &amp;wall, <a class="el" href="group__fluxfunctions.html#gacb84a8d3b8c253f1100c1530035da1de">CylindricalFunctor</a> &amp;transition)</td></tr>
<tr class="memdesc:gac47e668c6483d6cebfc9d6c798737b58"><td class="mdescLeft">&#160;</td><td class="mdescRight">Modify Magnetic Field above or below certain Psi values according to given parameters.  <a href="group__wall.html#gac47e668c6483d6cebfc9d6c798737b58">More...</a><br /></td></tr>
<tr class="separator:gac47e668c6483d6cebfc9d6c798737b58"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaed3e479895fabb863da670298b7d9c09"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="group__fluxfunctions.html#gacb84a8d3b8c253f1100c1530035da1de">CylindricalFunctor</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__wall.html#gaed3e479895fabb863da670298b7d9c09">dg::geo::createWallRegion</a> (dg::file::WrappedJsonValue gs, dg::file::WrappedJsonValue jsmod)</td></tr>
<tr class="memdesc:gaed3e479895fabb863da670298b7d9c09"><td class="mdescLeft">&#160;</td><td class="mdescRight">A convenience function call for <code><a class="el" href="group__wall.html#gac47e668c6483d6cebfc9d6c798737b58" title="Modify Magnetic Field above or below certain Psi values according to given parameters.">dg::geo::createModifiedField</a></code> that ignores the transition parameter and returns the wall.  <a href="group__wall.html#gaed3e479895fabb863da670298b7d9c09">More...</a><br /></td></tr>
<tr class="separator:gaed3e479895fabb863da670298b7d9c09"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad4fce2a87b624a0d4df4c2431706988f"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__wall.html#gad4fce2a87b624a0d4df4c2431706988f">dg::geo::createSheathRegion</a> (dg::file::WrappedJsonValue jsmod, <a class="el" href="structdg_1_1geo_1_1_tokamak_magnetic_field.html">TokamakMagneticField</a> mag, <a class="el" href="group__fluxfunctions.html#gacb84a8d3b8c253f1100c1530035da1de">CylindricalFunctor</a> wall, <a class="elRef" href="../../dg/html/group__gridtypes.html#ga4d84634067b1b3362041e211eec4de84">dg::Grid2d</a> &amp;sheath_walls, <a class="el" href="group__fluxfunctions.html#gacb84a8d3b8c253f1100c1530035da1de">CylindricalFunctor</a> &amp;sheath)</td></tr>
<tr class="memdesc:gad4fce2a87b624a0d4df4c2431706988f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create the sheath region where fieldlines intersect the boundary.  <a href="group__wall.html#gad4fce2a87b624a0d4df4c2431706988f">More...</a><br /></td></tr>
<tr class="separator:gad4fce2a87b624a0d4df4c2431706988f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Function Documentation</h2>
<a id="gac47e668c6483d6cebfc9d6c798737b58" name="gac47e668c6483d6cebfc9d6c798737b58"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac47e668c6483d6cebfc9d6c798737b58">&#9670;&nbsp;</a></span>createModifiedField()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="structdg_1_1geo_1_1_tokamak_magnetic_field.html">TokamakMagneticField</a> dg::geo::createModifiedField </td>
          <td>(</td>
          <td class="paramtype">dg::file::WrappedJsonValue&#160;</td>
          <td class="paramname"><em>gs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">dg::file::WrappedJsonValue&#160;</td>
          <td class="paramname"><em>jsmod</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__fluxfunctions.html#gacb84a8d3b8c253f1100c1530035da1de">CylindricalFunctor</a> &amp;&#160;</td>
          <td class="paramname"><em>wall</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__fluxfunctions.html#gacb84a8d3b8c253f1100c1530035da1de">CylindricalFunctor</a> &amp;&#160;</td>
          <td class="paramname"><em>transition</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Modify Magnetic Field above or below certain Psi values according to given parameters. </p>
<p >We modify psi above or below certain Psip values to a constant using the <code><a class="elRef" href="../../dg/html/structdg_1_1_i_polynomial_heaviside.html">dg::IPolynomialHeaviside</a></code> function (an approximation to the integrated <a class="elRef" href="../../dg/html/structdg_1_1_heaviside.html">Heaviside</a> function with width alpha), i.e. we replace psi with IPolynomialHeaviside(psi). This subsequently modifies all derivatives of psi and the poloidal current in this region.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">    <span class="stringliteral">&quot;type&quot;</span>: <span class="stringliteral">&quot;none&quot;</span></div>
<div class="line">}</div>
<div class="line">{</div>
<div class="line">    <span class="stringliteral">&quot;type&quot;</span>: <span class="stringliteral">&quot;heaviside&quot;</span>,</div>
<div class="line">    <span class="stringliteral">&quot;boundary&quot;</span>: 1.1,</div>
<div class="line">    <span class="stringliteral">&quot;alpha&quot;</span>: 0.20</div>
<div class="line">}</div>
<div class="line">{</div>
<div class="line">    <span class="stringliteral">&quot;type&quot;</span>: <span class="stringliteral">&quot;sol_pfr&quot;</span>,</div>
<div class="line">    <span class="stringliteral">&quot;boundary&quot;</span>: [1.1,0.998],</div>
<div class="line">    <span class="comment">// First value indicates SOL, second the PFR</span></div>
<div class="line">    <span class="stringliteral">&quot;alpha&quot;</span>: [0.10,0.10]</div>
<div class="line">}</div>
</div><!-- fragment --> <dl class="section see"><dt>See also</dt><dd>dg::geo::modification for possible values of "type" parameter </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">gs</td><td>forwarded to <code><a class="el" href="group__geom.html#gaa0da1d1c2db65f1f4b28d77307ad238b" title="Create a Magnetic field based on the given parameters.">dg::geo::createMagneticField</a></code> </td></tr>
    <tr><td class="paramname">jsmod</td><td>contains the fields described above to steer the creation of a modification region </td></tr>
    <tr><td class="paramname">wall</td><td>(out) On output contains the region where the wall is applied, the functor returns 1 where the wall is, 0 where there it is not and 0&lt;f&lt;1 in the transition region </td></tr>
    <tr><td class="paramname">transition</td><td>(out) On output contains the region where the transition of Psip to a constant value occurs, the functor returns 0&lt;f&lt;=1 for when there is a transition and 0 else </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Per default the dampening happens nowhere </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>A magnetic field object </dd></dl>
<dl class="section attention"><dt>Attention</dt><dd>This function is only defined if <code>json/json.h</code> is included before <code>dg/geometries/geometries.h</code> </dd></dl>

</div>
</div>
<a id="gad4fce2a87b624a0d4df4c2431706988f" name="gad4fce2a87b624a0d4df4c2431706988f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad4fce2a87b624a0d4df4c2431706988f">&#9670;&nbsp;</a></span>createSheathRegion()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void dg::geo::createSheathRegion </td>
          <td>(</td>
          <td class="paramtype">dg::file::WrappedJsonValue&#160;</td>
          <td class="paramname"><em>jsmod</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdg_1_1geo_1_1_tokamak_magnetic_field.html">TokamakMagneticField</a>&#160;</td>
          <td class="paramname"><em>mag</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__fluxfunctions.html#gacb84a8d3b8c253f1100c1530035da1de">CylindricalFunctor</a>&#160;</td>
          <td class="paramname"><em>wall</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="elRef" href="../../dg/html/group__gridtypes.html#ga4d84634067b1b3362041e211eec4de84">dg::Grid2d</a> &amp;&#160;</td>
          <td class="paramname"><em>sheath_walls</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__fluxfunctions.html#gacb84a8d3b8c253f1100c1530035da1de">CylindricalFunctor</a> &amp;&#160;</td>
          <td class="paramname"><em>sheath</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create the sheath region where fieldlines intersect the boundary. </p>
<p >The sheath functor that comes out of this does (i) on each of the four lines defined by the two vertical (R0, R1) and two horizontal (Z0, Z1) boundaries check if the "wall" functor is zero anywhere on the line: if not then move this boundary far away (ii) Measure the angular distance along the fieldline (both in positive and negative direction) to the remaining walls (iii) Modify the angular distances with a <a class="elRef" href="../../dg/html/structdg_1_1_polynomial_heaviside.html">dg::PolynomialHeaviside</a> functor with parameters given in jsmod: </p><div class="fragment"><div class="line">{</div>
<div class="line">    <span class="stringliteral">&quot;boundary&quot;</span> : 0.0625, <span class="comment">// value where sheath region begins in units of 2Pi</span></div>
<div class="line">    <span class="stringliteral">&quot;alpha&quot;</span> : 0.015625 <span class="comment">// diameter of the transition region in units of 2Pi</span></div>
<div class="line">}</div>
</div><!-- fragment --><p> (iv) The sheath region is the SetUnion of positive and negative functor, together with the SetIntersection with the SetNot(wall) region. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">jsmod</td><td>must contain fields as described above </td></tr>
    <tr><td class="paramname">mag</td><td>(in) the (unmodified) magnetic field, used to integrate the field towards or away from the sheath </td></tr>
    <tr><td class="paramname">wall</td><td>(in) the penalization region that represents the actual (perpendicular) wall without the divertor (if 0 on the boundary the boundary will be considered to be a sheath, else the boundary will be ignored) </td></tr>
    <tr><td class="paramname">sheath_walls</td><td>(inout) on input contains the box boundaries, on output the non-sheath boundaries are moved far away </td></tr>
    <tr><td class="paramname">sheath</td><td>(out) contains the region recognized as sheath (returning +1 within the sheath and 0 outside of it and something in-between in the transition region) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gaed3e479895fabb863da670298b7d9c09" name="gaed3e479895fabb863da670298b7d9c09"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaed3e479895fabb863da670298b7d9c09">&#9670;&nbsp;</a></span>createWallRegion()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="group__fluxfunctions.html#gacb84a8d3b8c253f1100c1530035da1de">CylindricalFunctor</a> dg::geo::createWallRegion </td>
          <td>(</td>
          <td class="paramtype">dg::file::WrappedJsonValue&#160;</td>
          <td class="paramname"><em>gs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">dg::file::WrappedJsonValue&#160;</td>
          <td class="paramname"><em>jsmod</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>A convenience function call for <code><a class="el" href="group__wall.html#gac47e668c6483d6cebfc9d6c798737b58" title="Modify Magnetic Field above or below certain Psi values according to given parameters.">dg::geo::createModifiedField</a></code> that ignores the transition parameter and returns the wall. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.3-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Fri Jan 14 2022 13:22:20 for Extension: Geometries by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3 </li>
  </ul>
</div>
</body>
</html>
